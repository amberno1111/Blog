# 使用BloomFilter解决缓存穿透问题

如果我们想判断一个元素是不是在一个数据集里，一般的想法是把这些数据集都读到内存里，然后遍历这个数据的集合，通过比较来确定。但是当元素非常大的时候，我们需要的内存越来越大，同时检索速度也会越来越慢。

布隆在1970年提出的[布隆过滤器](https://zh.wikipedia.org/wiki/%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8)就很好的解决了这个问题。它实际上是一个很长的二进制向量和一系列的随机映射函数，当一个元素被加入集合时，通过K个散列函数将这个元素映射到一个数组中的K个点，把它们置为1。在检索的时候，我们只需要看看这些位置是不是为1，就能判断是不是有这个元素了；如果这些点中存在任何一个点为0，那么这个元素肯定不存在；如果这些点所有的都是1，那么这个元素很可能存在，但是可能存在误判，也有可能不存在。**也就是说：布隆过滤器说某个元素存在，小概率会误判。布隆过滤器说某个元素不在，那么这个元素一定不在。**

布隆过滤器的使用场景：
- 缓存穿透的场景恰好是想要判断某个值是否在缓存中，所以可以使用布隆过滤器来做
- 判断给定的数据是否存在，可以过滤垃圾邮件、做黑名单等等

## Redis中的布隆过滤器

Redis Modules让Redis可以使用外部模块扩展其功能，官网推荐了一个开源项目RedisBloom作为Redis布隆过滤器的Module，https://github.com/RedisBloom/RedisBloom





